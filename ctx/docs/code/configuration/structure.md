# Code Configuration — Structure

Path: `ctx/docs/code/configuration/structure.md`

## Назначение

Документ фиксирует **нормативную структуру конфигурационного объекта backend-приложения Mindstream** на уровне параметров.

Документ определяет:

- какие параметры входят в конфигурацию;
- как они группируются;
- какие имена считаются допустимыми.

Документ **не описывает значения**, источники загрузки, семантику параметров и логику их использования.

---

## Общая форма конфигурации

Конфигурация backend-приложения представляется как один объект со следующими верхнеуровневыми секциями:

```
configuration:
    server
    db
    llm
```

Все параметры конфигурации **обязаны принадлежать одной из этих секций**.

---

## Секция `server`

Секция `server` содержит параметры runtime-веб-сервера backend-приложения.

Нормативный набор параметров MVP:

```
server:
    port
```

---

## Секция `db`

Секция `db` содержит параметры подключения и настройки DBAL (knex).

Нормативный набор параметров MVP:

```
db:
    client
    host
    port
    database
    user
    password
```

(Допустима вложенная группировка, если она не меняет состав параметров.)

---

## Секция `llm`

Секция `llm` содержит параметры подключения к внешнему LLM API.

Нормативный набор параметров MVP:

```
llm:
    apiKey
    baseUrl
    generationModel
    embeddingModel
```

---

## Инварианты структуры

В рамках MVP считается истинным, что:

- конфигурация содержит **только** параметры, перечисленные в данном документе;
- добавление нового параметра требует изменения этого документа;
- имена параметров считаются частью контракта;
- прикладной код не читает `process.env` напрямую;
- все параметры доступны через `Mindstream_Back_App_Configuration`.

---

## Эволюция структуры

Изменение структуры конфигурации допускается только через:

- добавление параметра в существующую секцию;
- добавление новой секции.

Любое такое изменение фиксируется **изменением данного документа** и синхронным изменением кода.

---

## Границы документа

Документ не фиксирует:

- имена переменных окружения;
- значения параметров;
- значения по умолчанию;
- обязательность параметров;
- формат секретов;
- правила валидации.

---

## Итог

Документ задаёт **жёсткий параметрный скелет конфигурации backend-приложения Mindstream**, достаточный для генерации, проверки и модификации кода агентами без домысливания и интерпретации.
