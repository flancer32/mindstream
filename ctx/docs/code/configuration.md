# Code Configuration — MVP

Path: `./ctx/docs/code/configuration.md`

## Назначение

Документ фиксирует **нормативную модель конфигурации backend-приложения Mindstream** на уровне кодового слоя.

Он определяет, **как в проекте устроена работа с конфигурацией**, какие инварианты считаются обязательными и какие формы доступа к параметрам окружения допустимы.

Документ относится исключительно к слою `code/` и не вводит архитектурных, продуктовых или эксплуатационных решений.

---

## Статус конфигурации

Конфигурация backend-приложения Mindstream оформляется как **внутренний объект прикладного приложения**.

Объект конфигурации:

- не является частью runtime-контракта;
- не участвует в архитектурной модели запуска;
- не передаётся из bootstrap-кода;
- создаётся и используется исключительно внутри приложения.

Архитектурный и environment-слои **не оперируют** сущностью конфигурации как объектом.

---

## Единый объект конфигурации

В backend-приложении существует **ровно один** объект конфигурации: `Mindstream_Back_App_Configuration`.

- объект создаётся единственной точкой сборки в прикладном коде;
- объект присутствует в памяти процесса на протяжении всего времени работы приложения;
- объект используется как **read-only** структура и не изменяется после создания;
- доступ к объекту осуществляется через стандартные механизмы связывания кода (импорт или DI), без использования глобального состояния.

Создание дополнительных объектов конфигурации, конфигурационных дублей или альтернативных источников считается нарушением нормы.

---

## Источники параметров

Нормативными источниками параметров конфигурации являются:

- значения окружения процесса;
- статические значения по умолчанию, определённые в кодовой базе.

Любые другие источники (файлы конфигурации, удалённые сервисы, runtime-реестр) не входят в модель конфигурации MVP.

---

## Доступ к параметрам окружения

Параметры окружения читаются **только** в точке сборки объекта конфигурации.

Прямой доступ к переменным окружения в прикладных модулях, сервисах или адаптерах запрещён и считается нарушением инженерной нормы.

---

## Нормализация и валидация

Все значения окружения приводятся к типам и формату, необходимым для использования внутри приложения, в момент построения объекта конфигурации.

Объект конфигурации содержит **только нормализованные значения**, пригодные для прямого использования. Передача "сырых" строк окружения в прикладной код запрещена.

---

## Границы документа

Документ не описывает:

- конкретные имена переменных окружения;
- формат хранения секретов;
- процедуры деплоя и настройки окружения;
- архитектурную модель запуска.

Эти аспекты относятся к другим уровням контекста и не фиксируются на уровне `code/`.
