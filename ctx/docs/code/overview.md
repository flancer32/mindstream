# Code Layer — Overview

Path: `./ctx/docs/code/overview.md`

## Назначение

Документ описывает **смысл, роль и устойчивую форму кодового слоя** в корпусе документации Mindstream.

Он предназначен для фиксации того, **что считается кодовым слоем как объектом системы**, независимо от текущей итерации разработки, набора задач или состава агентов.

Документ не задаёт процедур и не описывает поведение агентов. Он фиксирует **инварианты формы кода**, внутри которых возможна итеративная реализация.

---

## Роль кодового слоя в корпусе

Кодовый слой является **производным** по отношению к другим уровням корпуса:

- продукту и его целевой картине;
- ограничениям MVP;
- архитектурной форме;
- композиции пользовательского опыта;
- среде исполнения.

Код **не формирует смысл системы** и не расширяет её рамки. Он служит исполняемым выражением уже зафиксированных решений.

---

## Код как форма, а не источник истины

В рамках Mindstream код:

- не является источником требований;
- не используется для фиксации архитектурных или продуктовых решений;
- не подменяет документацию контекста.

Любые смысловые допущения, зашитые в код, считаются ошибкой проектирования, если они не отражены на соответствующем уровне корпуса.

---

## Код как исполняемое приложение

В рамках MVP Mindstream кодовая база рассматривается как **исполняемое Node.js-приложение**, а не как библиотека.

Это означает, что:

- код обладает собственным жизненным циклом выполнения;
- существует явная точка входа исполнения;
- сервер и служебные задачи запускаются как приложение;
- код не предназначен для встраивания в сторонние проекты.

Данная позиция является **устойчивым свойством кодового слоя** и не зависит от конкретной итерации.

---

## Структурная форма кодовой базы

Кодовый слой имеет **нормативную структурную форму**, отражающую разделение ролей, а не текущую реализацию.

Структура рассматривается как **инвариант формы**, необходимый для устойчивой агентной работы.

### Ролевые зоны кода

В кодовой базе различаются следующие устойчивые зоны:

- **зона входа выполнения** — код, инициирующий запуск приложения и задач;
- **серверная прикладная зона** — реализация API и серверной логики;
- **клиентская зона** — статические фронтенд-артефакты, поставляемые как PWA;
- **зона тестирования** — код проверки корректности серверной и клиентской частей.

Зоны отражают **различные роли кода** и не смешиваются между собой.

---

## Принцип разделения ролей

В рамках кодового слоя считается недопустимым:

- смешение логики запуска и прикладной логики;
- размещение клиентской статики в серверных модулях;
- использование серверного кода для обслуживания статики;
- появление альтернативных точек входа, не согласованных с формой проекта.

Структурная форма служит опорой для итеративного развития, а не временным соглашением конкретной задачи.

---

## Связь с архитектурой

Архитектура задаёт **форму системы**, но не детализирует кодовую организацию.

Кодовый слой реализует архитектурные решения, не расширяет их самостоятельно и не вводит скрытых архитектурных допущений.

Архитектурные решения должны быть видимы **на уровне документации**, а не реконструироваться по коду.

---

## Ограничения MVP на кодовом уровне

Ограничения MVP считаются жёсткими и обязательными для кодового слоя.

Код не используется для скрытого расширения scope, не содержит заделов, меняющих форму продукта, и не вводит функциональность «на будущее», выходящую за рамки MVP.

Любое отклонение от ограничений фиксируется вне кода.

---

## Runtime как граница

Среда исполнения задаёт **границы допустимого**, а не оптимальные решения.

Кодовый слой ориентируется на зафиксированный runtime, не использует альтернативные технологии по умолчанию и не подменяет среду исполнения логикой кода.

---

## Неопределённости

При отсутствии явных указаний в корпусе документов код не принимает решений по умолчанию, не опирается на незафиксированные практики и не вводит неявных соглашений.

Пробелы считаются поводом для уточнения, а не для импровизации.

---

## Итоговая позиция

Кодовый слой Mindstream вторичен по отношению к контексту, исполняем, а не концептуален, структурно определён и подчинён архитектуре, ограничениям и среде исполнения.

Документ фиксирует **форму кода как слоя системы**, а не правила работы с ним.
