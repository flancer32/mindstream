# Code Layer — Overview

Path: `./ctx/docs/code/overview.md`

## Назначение

Документ описывает **смысл и роль кодового слоя** в корпусе документации Mindstream.  
Он задаёт контекст интерпретации инженерных конвенций и агентных правил,
но **не содержит нормативных требований**.

Документ предназначен для понимания того,
как агент и человек должны мыслить о коде в рамках MVP.

---

## Роль кодового слоя

Кодовый слой является **производным** по отношению ко всем предыдущим уровням:

- продукту и его смыслу;
- ограничениям MVP;
- архитектурной форме;
- композиции пользовательского опыта;
- среде исполнения.

Код **не является источником истины**.  
Он рассматривается как исполняемое выражение уже зафиксированных инвариантов.

---

## Место `code/conventions.md`

`code/conventions.md` фиксирует **инженерные инварианты кода**:

- допустимые языки и формы;
- модель импорта и внедрения зависимостей;
- подход к асинхронности, состоянию и ошибкам;
- требования к структуре и тестированию.

Конвенции:

- трактуются буквально;
- задают минимальные рамки допустимого кода;
- не являются рекомендациями или best practices.

Любая реализация, выходящая за рамки конвенций,
считается отклонением и требует отдельного согласования.

---

## Место `code/AGENTS.md`

`code/AGENTS.md` определяет **нормативные правила поведения агента** при работе с кодом:

- что агент имеет право делать;
- чего он делать не имеет права;
- как действовать при конфликте контекстов;
- что считается ошибкой агента.

Этот файл выполняет роль **иерархического фильтра поведения**
и должен оставаться компактным и однозначным.

---

## Интерпретация архитектуры на кодовом уровне

Архитектура рассматривается как **заданная форма**, но не как полностью закрытая система.

Агент:

- не изменяет архитектуру самостоятельно;
- может предлагать новые сущности или расширения,
  если они необходимы для реализации продукта;
- обязан явно выносить такие предложения на согласование.

Архитектурные решения **не должны прятаться в коде**
через неявные допущения или обходные приёмы.

---

## Работа с ограничениями MVP

Ограничения MVP считаются жёсткими.

Если при работе с кодом выявляется:

- полезная, но выходящая за рамки MVP возможность;
- улучшение, нарушающее scope;

агент обязан:

- явно указать на это;
- не реализовывать изменение без согласования.

Код не используется как способ «тихо расширить MVP».

---

## Runtime как граница, а не рекомендация

Среда исполнения, зафиксированная в `environment/runtime.md`,
задаёт **границы допустимого**, а не оптимальный выбор.

Агент:

- не меняет runtime по умолчанию;
- может предлагать изменения среды только явно;
- не использует альтернативные технологии «для удобства».

---

## Неопределённость и пробелы

При отсутствии явного указания в корпусе документов:

- агент **не принимает решения по умолчанию**;
- не опирается на «общепринятые практики»;
- обязан остановиться и запросить уточнение.

Молчаливые допущения считаются ошибкой.

---

## Технический долг и отчётность

Кодовый слой допускает существование технического долга,
но только как **осознанного и зафиксированного**.

Агент обязан:

- явно отмечать допущения;
- фиксировать нарушения конвенций;
- указывать долг в отчёте по итерации.

Технический долг не легализует нарушение корпуса документов.

---

## Граница ответственности

Кодовый слой **не решает**:

- продуктовые вопросы;
- архитектурные споры;
- расширение MVP;
- изменение среды исполнения.

Все такие вопросы выносятся за пределы кода
и решаются на соответствующих уровнях корпуса.

---

## Итоговая позиция

Код в Mindstream:

- вторичен;
- воспроизводим;
- дисциплинирован;
- подчинён смыслу, архитектуре и ограничениям.

Этот документ задаёт рамку мышления,
внутри которой код может развиваться без расползания системы.
