# API Ingress

Path: `./ctx/docs/architecture/web/api-ingress.md`

## Назначение

Документ фиксирует архитектурную роль API-ingress в web-контуре Mindstream и задаёт инварианты обработки HTTP-запросов, входящих в пространство `/api/**`.

## Границы `/api/**`

API-ingress принимает только запросы, чей путь начинается с `/api`.

Все запросы, не попадающие в `/api/**`, считаются внешними для API-ingress и не обрабатываются данным контуром.

## Роль API-handler

API-ingress реализуется единственным API-handler, который:

- фильтрует запросы по префиксу `/api`;
- извлекает путь без префикса `/api` для внутренней диспетчеризации;
- передаёт управление endpoint-handler'ам, соответствующим полученному пути;
- применяет fallback-обработчик при отсутствии endpoint-handler.

API-handler является единственной точкой входа в API-обработку web-контура и не дублируется другими ingress-обработчиками.

## Fallback-обработка

Если endpoint-handler для запрошенного пути отсутствует, API-ingress вызывает fallback-обработчик.

Fallback-обработчик всегда возвращает детерминированный JSON-ответ о доступности API и не зависит от конкретных endpoint-handler'ов.
