# Mindstream — Architecture Overview

Path: `./ctx/docs/architecture/overview.md`

## Назначение

Документ фиксирует архитектурную форму MVP Mindstream: оси архитектуры, контуры, границу системы и внешней среды, а также базовые инварианты потоков без перехода к реализации, API, SQL или пользовательскому интерфейсу.

Архитектура выводится из продуктового смысла и ограничений MVP и не вводит новых продуктовых сущностей.

---

## Архитектурные оси

- **Content Collection** — технический набор публикаций и их производных представлений, общий для всех контекстов чтения.
- **Attention** — статистические сигналы наблюдения в браузерном контексте, фиксируемые как write-факты.
- **Anonymous Identity** — технический UUID-идентификатор источника сигналов внимания, не субъект и не модель пользователя.

---

## Архитектурные контуры

- **ingress** — внешние границы принятия read/write запросов.
- **data flow** — допустимые потоки данных между контурами.
- **storage** — каноническое хранение Content Collection и storage статистики внимания.
- **runtime** — границы исполнения серверных контуров без спецификации реализации.

---

## Граница системы и внешняя среда

К системе Mindstream относятся серверные контуры Content Collection и storage сигналов внимания, а также браузерный контур фиксации attention-сигналов.

К внешней среде относятся источники публикаций, LLM/Embedding сервисы, сеть и инфраструктура исполнения.

### Ingress-границы

Взаимодействие внешней среды с системой осуществляется через архитектурные ingress-границы:

- `ingress/http-ingress.md` — HTTP boundary для read/write запросов.
- `ingress/attention-write-ingress.md` — write-only boundary для сигналов внимания.

---

## Архитектурная схема

![Mindstream architecture contours](../_img/mindstream_arch_conturs.svg)

Схема носит пояснительный характер и не фиксирует реализационные или технологические решения.

---

## Потоки данных и направленность

- **Content Collection flows** исполняются только в серверных контурах и образуют последовательность `ingestion → content processing → storage`.
- **Attention flows** направлены из браузерного контура в storage и являются write-only потоками.
- Передача attention-сигналов допускается только при наличии зарегистрированной anonymous identity.

---

## Архитектурные инварианты MVP

- Content Collection является каноническим состоянием и не зависит от attention-сигналов.
- Attention-сигналы не инициируют пересчёт Content Collection и не создают глобальных обратных связей.
- Anonymous identity фиксирует источник внимания как техническую сущность и не используется для персонализации на уровне архитектуры.

---

## Границы документа

Данный overview не описывает источники публикаций, алгоритмы обработки, форматы хранения и передачи данных, API-контракты, UI/UX и инженерные решения runtime.

---

## Итог

Архитектура MVP Mindstream определяется тремя осями (Content Collection, Attention, Anonymous Identity), чёткими ingress-границами и однонаправленными потоками данных, где storage фиксирует каноническое состояние Content Collection и статистику внимания без реактивных обратных связей.
