# HTTP Runtime Boundary

Path: `./ctx/docs/architecture/runtime/http-runtime.md`

## Назначение

Документ фиксирует архитектурную роль HTTP-runtime-границы Mindstream в рамках MVP и место Apache в цепочке исполнения системы при обработке внешних HTTP-запросов.

---

## Архитектурная позиция

HTTP-runtime-граница располагается между внешними HTTP-клиентами и backend-приложением Mindstream и является частью runtime-архитектуры системы.

Архитектурная цепочка исполнения при HTTP-доступе имеет следующий вид:

```
Client → Apache → Node backend (HTTP Ingress)
```

Apache и Node-приложение участвуют в одном runtime-контуре, но выполняют разные архитектурные роли.

---

## Роль Apache в runtime-архитектуре

В рамках MVP Apache является **обязательным компонентом исполнения** и выполняет следующие архитектурные функции:

- TLS termination для всех внешних HTTP-подключений;
- маршрутизацию HTTP-запросов;
- проксирование запросов, относящихся к HTTP Ingress, во внутреннее Node-приложение;
- раздачу статических ресурсов и SPA.

Apache является первой точкой контакта системы с внешним HTTP-миром и реализует транспортный уровень HTTP-доступа.

---

## Связь с HTTP Ingress

Apache является частью **реализации HTTP Ingress**, но не тождественен ему.

- **HTTP Ingress** — архитектурная граница системы.
- **Apache** — обязательный runtime-компонент, реализующий часть этой границы.

HTTP Ingress не описывает конфигурацию Apache, однако в MVP Apache выбран как каноническая реализация HTTP-runtime-границы.

---

## Отделение от bootstrap-слоя

Apache не относится к bootstrap-слою и завершает свою роль до входа управления в backend-приложение. Bootstrap-слой начинается в точке передачи управления приложению и не зависит от HTTP-runtime-границы.

---

## Архитектурные инварианты (MVP)

В рамках MVP считается истинным, что:

- Apache является обязательной частью runtime-архитектуры;
- прямой внешний HTTP-доступ к Node-приложению отсутствует;
- все внешние HTTP-запросы проходят через Apache;
- замена или удаление Apache требует пересмотра архитектурного корпуса документации.

---

## Связи

HTTP-runtime-граница обеспечивает исполнение HTTP Ingress и фиксируется как runtime-часть соответствующей архитектурной границы. Связанный документ: `ctx/docs/architecture/http-ingress.md`.

Bootstrap-модель запуска описана в `ctx/docs/architecture/runtime/bootstrap.md` и определяет начало исполнения backend-приложения после завершения роли Apache.
