# Frontend Data Ingress

Path: `ctx/docs/architecture/ingress/frontend-data-ingress.md`

## Назначение

**Frontend Data Ingress** — это архитектурная граница Mindstream, через которую данные из backend-системы доставляются в браузер для отображения и пользовательского взаимодействия.

Frontend Data Ingress определяет **единственный канонический способ** доставки данных на фронт в рамках MVP и фиксирует модель взаимодействия браузера с backend-приложением.

---

## Границы ответственности

Frontend Data Ingress отвечает за:

- доставку данных из backend-приложения в браузер;
- определение модели взаимодействия браузера с HTTP API;
- фиксацию архитектурных ограничений фронтенд-доступа к данным.

Frontend Data Ingress **не отвечает** за:

- бизнес-логику обработки данных;
- управление жизненным циклом данных в БД;
- генерацию, обогащение или агрегацию данных вне read-модели.

---

## Архитектурные инварианты (MVP)

В рамках MVP зафиксированы следующие инварианты:

1. **Доставка данных в браузер осуществляется исключительно через HTTP API.**  
   Иные каналы доставки (WebSocket, SSE, long-polling и т.п.) архитектурно не допускаются.

2. **Используется pull-модель взаимодействия.**  
   Браузер самостоятельно инициирует HTTP-запросы для получения данных. Backend не инициирует доставку данных в браузер.

3. **Frontend не имеет прямого доступа к данным хранения.**  
   Браузер не знает о структуре БД и не взаимодействует с ней напрямую. Единственным источником данных для фронта является HTTP API.

4. **Frontend получает только read-модель представления.**  
   Данные, доставляемые в браузер, представляют собой заранее сформированное сервером представление (read-model), а не сырые записи таблиц.

5. **Бизнес-логика отсутствует на фронтенде.**  
   Фронтенд-код отвечает только за запрос данных, хранение локального UI-состояния и рендеринг.

---

## Feed View как каноническая read-модель

В рамках MVP доставка данных на фронт осуществляется в виде **Feed View** — серверной read-модели ленты.

Feed View характеризуется следующим образом:

- является read-only представлением;
- формируется на стороне backend;
- может агрегировать данные из нескольких доменных источников и таблиц;
- не обязана отражать структуру хранения данных;
- предназначена исключительно для отображения и базового взаимодействия в UI.

Feed View является архитектурным контрактом между backend и фронтендом и не тождественна доменным моделям хранения.

Структура и состав Feed View зафиксированы отдельным архитектурным документом `ctx/docs/architecture/feed-view-dto.md` и являются нормативным контрактом между backend и фронтендом. Frontend Data Ingress определяет канал доставки Feed View, но не дублирует описание его структуры.

---

## Связь с HTTP Ingress

Frontend Data Ingress является **подмножеством HTTP Ingress**, специализирующимся на доставке данных в браузер.

В рамках MVP считается истинным, что:

- все запросы Frontend Data Ingress проходят через HTTP Ingress;
- Frontend Data Ingress использует пространство `/api/**`;
- Frontend Data Ingress не имеет собственных ingress-механизмов вне HTTP Ingress.

Frontend Data Ingress не расширяет и не модифицирует архитектурные инварианты HTTP Ingress, а использует их как данность.

---

## Поток данных (MVP)

Канонический поток данных в рамках Frontend Data Ingress выглядит следующим образом:

1. Браузер загружает статические ресурсы приложения.
2. Фронтенд-код инициирует HTTP-запрос к API.
3. HTTP Ingress передаёт управление backend-приложению.
4. Backend формирует Feed View на основе данных хранения.
5. Feed View сериализуется и возвращается в браузер.
6. Фронтенд рендерит полученное представление.

Иные потоки данных в рамках MVP не допускаются.

---

## Архитектурные ограничения MVP

В рамках MVP **не предусматриваются**:

- live-обновления данных;
- push-механизмы доставки;
- клиентские подписки;
- оффлайн-режим;
- сложные механизмы клиентского кэширования;
- альтернативные API-парадигмы (GraphQL и т.п.).

Эти ограничения являются архитектурными границами MVP, а не временными ограничениями реализации.

---

## Контекст использования

Frontend Data Ingress предназначен для:

- отображения персональной смысловой ленты;
- базового пользовательского взаимодействия с лентой;
- визуализации результатов обработки данных backend-системой.

Поведение конкретных API-эндпойнтов, форматы DTO и реализация UI относятся к уровню реализации и не фиксируются в данном документе.

## Связанные архитектурные документы

- Feed View DTO (`ctx/docs/architecture/feed-view-dto.md`)
- HTTP Ingress (`ctx/docs/architecture/ingress/http-ingress.md`)
