# CLI Ingress

Path: `ctx/docs/architecture/ingress/cli-ingress.md`

## Назначение

**CLI Ingress** — это архитектурная граница Mindstream, через которую система принимает внешние командные воздействия, инициируемые из среды выполнения (shell, CI, cron, ручной запуск).

CLI Ingress предназначен для запуска операционных, batch- и обслуживающих процессов системы в рамках MVP и является каноническим способом управления серверными контурами вне HTTP-доступа.

---

## Границы ответственности

CLI Ingress отвечает за:

- приём команд из внешней среды выполнения;
- передачу управления backend-приложению;
- инициацию выполнения одной архитектурно завершённой операции за запуск.

---

## Архитектурные инварианты (MVP)

В рамках MVP зафиксированы следующие инварианты:

1. **CLI является каноническим ingress-каналом для операционных команд.**  
   Все команды ingestion, processing, обслуживания и технических операций запускаются исключительно через CLI.

2. **CLI-команды не доступны через HTTP Ingress.**  
   Ни одна CLI-команда не экспонируется через HTTP API и не вызывается из веб-контекста.

3. **CLI Ingress всегда batch.**  
   Интерактивные сценарии (stdin/stdout диалоги, REPL) архитектурно не допускаются.

4. **Каждый CLI-запуск является изолированным и неинтерактивным.**  
   Один запуск CLI соответствует одному запуску backend-приложения и выполнению одной команды без сохранения состояния между запусками.

5. **CLI Ingress использует стандартную модель bootstrap.**  
   Передача управления в приложение осуществляется через bootstrap-слой, зафиксированный в `ctx/docs/architecture/runtime/bootstrap.md`.

---

## Связь с runtime-архитектурой

CLI Ingress использует runtime-bootstrap как механизм входа и остаётся отдельной архитектурной границей, не тождественной bootstrap-слою. Нормативная модель bootstrap зафиксирована в `ctx/docs/architecture/runtime/bootstrap.md`.

---

## Связь с HTTP Ingress

CLI Ingress и HTTP Ingress являются независимыми и ортогональными архитектурными границами.

В рамках MVP считается истинным, что:

- CLI Ingress не инициирует HTTP-вызовы;
- HTTP Ingress не инициирует CLI-команды;
- оба ingress-канала взаимодействуют с приложением только через его публичные архитектурные контракты.

Ни один ingress-канал не является подмножеством другого.

---

## Контекст использования

CLI Ingress предназначен для:

- ingestion-процессов;
- processing-команд;
- расчёта эмбеддингов;
- технического обслуживания и административных операций;
- batch-и офлайн-процессов.
