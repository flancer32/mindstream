# Модель внимания пользователя

Path: `./ctx/docs/architecture/attention/interest-vector.md`

## Назначение

Вектор интересов пользователя (interest vector) — это локальное агрегированное представление смысловых предпочтений пользователя, формируемое на основе **явных актов внимания** и используемое для оценки потенциального интереса к публикациям.

Interest vector применяется для:

- оценки релевантности публикаций относительно текущего внимания пользователя;
- локального переупорядочивания элементов персональной ленты.

Вектор **не является**:

- профилем пользователя;
- историей просмотров;
- каноническим состоянием системы;
- моделью личности или долгосрочных намерений.

Он отражает **текущее и накопленное внимание**, с учётом устаревания прошлых вкладов.

---

## Граница ответственности

Данный документ фиксирует:

- архитектурную роль interest vector;
- источники сигналов внимания;
- качественные приоритеты сигналов;
- принципы накопления и устаревания;
- границы хранения и использования в рамках MVP.

Документ **не описывает**:

- алгоритмы обновления interest vector;
- формулы, коэффициенты и численные параметры;
- конкретные UI-события или обработчики;
- технические механизмы хранения;
- серверные модели персонализации.

---

## Расположение и жизненный цикл

В рамках MVP:

- interest vector формируется и используется **исключительно на фронте**;
- он хранится в локальном фронтенд-контексте и переживает перезагрузки приложения;
- сервер не получает, не хранит и не интерпретирует interest vector;
- interest vector не считается каноническим состоянием и может быть полностью утрачeн без нарушения целостности системы.

Локальная утрата interest vector трактуется как допустимая потеря производного состояния.

---

## Принцип формирования

Interest vector обновляется **только на основании осознанных действий пользователя**, интерпретируемых как сигналы внимания.

Факт показа контента без действия пользователя **не является сигналом внимания** и не влияет на interest vector.

Вектор является агрегированной производной от:

- семантических представлений публикаций;
- пользовательских актов внимания.

---

## Накопление и устаревание

Interest vector является **накапливаемым, но устаревающим состоянием**.

Архитектурные принципы:

- вклад каждого сигнала внимания сохраняется во времени;
- вклад сигналов **уменьшается по мере удаления от момента взаимодействия**;
- interest vector отражает актуальные интересы, а не всю историю взаимодействий.

Механизмы устаревания:

- локальны;
- детерминированы в рамках фронта;
- не синхронизируются с сервером;
- не фиксируются на уровне архитектуры численно.

---

## Сигналы внимания

### Учитываемые сигналы

#### 1. Взаимодействие с обзором публикации

Факт открытия обзора считается сигналом внимания.

- Время чтения обзора не учитывается.
- Само действие открытия трактуется как достаточное проявление интереса.

Характер сигнала:

- средняя сила;
- отражает интерес к интерпретации и смысловому содержанию публикации.

---

#### 2. Переход по ссылке на источник (`source_url`)

Переход к первоисточнику считается сигналом внимания более высокой силы.

- Повторные переходы по одной и той же публикации в рамках MVP не нормализуются.
- Каждый переход интерпретируется как отдельный факт внимания.

Характер сигнала:

- сильный;
- отражает подтверждённый интерес к исходному материалу.

---

#### 3. Комбинированный сигнал: обзор + переход по ссылке

Сценарий, при котором пользователь:

- открывает обзор публикации;
- и затем переходит по ссылке на источник,

считается **наиболее сильным проявлением внимания**.

Комбинированный сигнал:

- не отменяет предыдущие сигналы;
- интерпретируется как усиленный вклад в interest vector.

---

### Неучитываемые сигналы

#### Аннотация публикации

Аннотация:

- всегда доступна пользователю по умолчанию;
- является частью фонового контекста интерфейса.

Аннотация **не считается сигналом внимания** и **не участвует** в обновлении interest vector.

---

#### Пассивный скролл ленты

Прокрутка ленты без явных действий:

- не трактуется как осознанный выбор;
- не используется для обновления interest vector в MVP.

---

## Приоритет сигналов

Сигналы внимания различаются по приоритету следующим образом (от слабого к сильному):

1. Открытие обзора.
2. Переход по ссылке на источник.
3. Открытие обзора + переход по ссылке.

Приоритеты фиксируются качественно и используются для интерпретации вкладов, без задания численных коэффициентов на архитектурном уровне.

---

## Использование interest vector

Interest vector используется:

- для локальной оценки потенциального интереса пользователя к каждой публикации;
- как вход в ранжирование элементов персональной ленты.

Interest vector **не используется**:

- для фильтрации корпуса;
- для изменения серверных данных;
- для формирования канонических read-моделей.

---

## Ограничения MVP

- Interest vector не синхронизируется между устройствами.
- Нет серверной интерпретации interest vector.
- Нет общего профиля пользователя.
- Механика устаревания не нормирована численно.
- Потеря локального состояния допустима.

Все перечисленные ограничения считаются **архитектурными свойствами MVP**.

---

## Инварианты

- Interest vector является локальным и неканоническим состоянием.
- Interest vector обновляется только действиями пользователя.
- Отсутствие действий не изменяет вектор.
- Факт показа текста не является сигналом внимания.
- Аннотация не участвует в расчёте interest vector.
- Вклад сигналов со временем уменьшается.
- Комбинация действий усиливает вклад, но не отменяет предыдущие.

---

## Связанные документы

- Документы архитектуры UI (источники пользовательских действий).
- Документы data-flow внимания.
- Документы embeddings и семантических представлений.
