# Mindstream — Content Collection Flows

Path: `./ctx/docs/architecture/data-flow/content-collection.md`

## Назначение

Документ фиксирует **Content Collection flows** в MVP Mindstream.

Под Content Collection flows понимаются серверные потоки данных, в результате которых формируется и поддерживается технический набор публикаций и их производных представлений, используемый всеми контекстами чтения.

Документ описывает только Content Collection flows и не затрагивает Attention flows или браузерные вычислительные петли.

---

## Архитектурная позиция

Content Collection flows исполняются исключительно в серверной части системы и формируют каноническое состояние Content Collection.

Эти потоки:

- не зависят от anonymous identity;
- не зависят от attention-сигналов;
- не имеют обратных связей с браузерными контурами;
- не моделируют «реальность», а фиксируют технический набор публикаций.

Публикация рассматривается как атомарный артефакт Content Collection.

---

## Общая структура Content Collection flows

В рамках MVP Content Collection flows образуют последовательность:

`ingestion → content processing → storage`

---

## Ingestion

(`Publication Sources → Ingestion`)

**Назначение** — получение публикаций из внешних источников и формирование внутреннего текстового представления, пригодного для дальнейшей обработки.

**Инварианты**

- поток инициируется исключительно серверным контуром;
- публикация либо принимается целиком, либо исключается из Content Collection;
- результат потока не зависит от браузерного контекста.

---

## Content Processing

(`Ingestion → Content Processing`)

**Назначение** — формирование производных представлений публикации, необходимых для read-представлений и дальнейшего использования.

**Инварианты**

- производные представления формируются как алгоритмические проекции подготовленного текста публикации;
- процесс не зависит от attention-сигналов;
- повторная обработка одной и той же публикации не допускается в рамках MVP.

---

## Storage

(`Content Processing → Storage`)

**Назначение** — сохранение результатов Content Collection flows в каноническом storage.

**Сохраняемые данные**

- публикации и их внутренние представления;
- производные представления (annotation, overview);
- embeddings, полученные из производных представлений.

**Инварианты**

- состояние storage является каноническим по отношению ко всем контекстам;
- сохранённые данные не изменяются реактивно в ответ на внимание;
- обновление Content Collection допускается только как результат серверных потоков формирования.

---

## Ограничения

Content Collection flows не содержат read-/write API, не задают форматы передачи данных и не определяют реализационные механизмы выполнения потоков.

---

## Итог

Документ фиксирует Content Collection flows Mindstream как замкнутую серверную последовательность `ingestion → content processing → storage`, формирующую канонический технический набор публикаций без участия anonymous identity, без зависимости от attention и без глобальной реактивности в рамках MVP.
