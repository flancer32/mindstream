# Mindstream — Attention Flows

Path: `./ctx/docs/architecture/data-flow/attention.md`

## Назначение

Документ фиксирует **Attention flows** в MVP Mindstream.

Под Attention flows понимаются архитектурно допустимые write-only потоки данных, возникающие в браузерном контексте и, при выполнении условий, передаваемые в серверный контур хранения как статистические факты.

Документ описывает только Attention flows и не затрагивает **Content Collection flows** или локальные вычислительные петли браузерного контура.

---

## Архитектурная позиция

Attention flows соединяют браузерный контур фиксации внимания с серверным контуром хранения.

Эти потоки:

- имеют происхождение в браузерном контексте;
- направлены от браузера к серверной части системы (`Browser → Storage`);
- носят статистический характер;
- не участвуют в формировании или изменении Content Collection.

---

## Общая модель Attention flows

Сигналы внимания фиксируют факты взаимодействия браузерного контекста с read-представлениями публикаций.

Сигналы накапливаются как статистические наблюдения без интерпретации порядка, причинности или намерений; последовательность и композиция форм внимания относятся к прикладному и UI-уровню.

![Attention Signal Data Flows](../../_img/mindstream_arch_data_flow_attention.svg)

Схема: Attention flows.

Семантическая интерпретация сигналов внимания и их влияние на локальный interest vector зафиксированы в документе `../attention/interest-vector.md`.

---

## Поток передачи сигналов внимания

(`Browser → Storage`)

### Назначение

Передача зафиксированных сигналов внимания из браузерного контура в серверный контур хранения как статистических фактов.

### Передаваемые данные

- идентификаторы публикаций;
- признаки взаимодействия с публикацией;
- минимальный контекст, необходимый для последующего агрегирования.

### Свойства потока

- поток является однонаправленным и write-only;
- передача сигналов не изменяет Content Collection;
- сигналы не инициируют пересчёт смысловых представлений или эмбеддингов;
- отсутствие передачи сигналов не нарушает функционирование системы.

---

## Условность передачи сигналов внимания

Передача сигналов внимания является **условной** и зависит от наличия **зарегистрированной anonymous identity** в браузерном контексте.

### Контекст без identity

- anonymous identity отсутствует или не зарегистрирована;
- сигналы внимания могут фиксироваться и использоваться только локально;
- передача сигналов в серверный контур хранения отсутствует.

### Контекст с зарегистрированной identity

- anonymous identity присутствует и зарегистрирована;
- допускается передача сигналов внимания в серверный контур хранения;
- передаваемые сигналы используются исключительно для агрегирования статистики.

Во всех случаях архитектурная роль сигналов внимания остаётся неизменной.

Модель anonymous identity и её lifecycle зафиксированы в документе `ctx/docs/architecture/anonymous-identity/invariants.md`.

---

## Ограничения

Глобальные запреты на реактивность, обратные связи и управляющие потоки распространяются на Attention flows и исключают влияние сигналов внимания на Content Collection flows.

---

## Границы документа

Данный документ не описывает:

- пользовательский интерфейс и формы взаимодействия;
- продуктовые сценарии;
- интерпретацию сигналов внимания;
- алгоритмы агрегации и анализа;
- структуру interest vector;
- форматы хранения и передачи данных;
- API-эндпойнты и ingress-реализации.

Эти вопросы относятся к другим слоям документации.

---

## Итог

Документ фиксирует Attention flows Mindstream как однонаправленные write-only потоки наблюдения, передающие факты внимания из браузерного контекста в серверное хранилище **только при наличии зарегистрированной anonymous identity**, без управляющих эффектов, без реактивности и без влияния на Content Collection в рамках MVP.
