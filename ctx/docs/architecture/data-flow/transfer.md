# Mindstream — Corpus Delivery Data Flows

Path: `ctx/docs/architecture/data-flow/transfer.md`

## Назначение

Документ фиксирует потоки передачи корпусных данных в MVP Mindstream.

Под потоками передачи корпусных данных понимаются архитектурно допустимые потоки, обеспечивающие доступ браузерного контура к каноническому корпусу данных, сформированному серверными контурами.

Документ описывает только **Corpus Delivery Flows** и не затрагивает потоки формирования корпуса, потоки сигналов внимания или локальные вычислительные петли браузерного контура.

---

## Архитектурная позиция

Потоки передачи корпусных данных соединяют контуры формирования корпуса с контурами персональной проекции и внимания.

Эти потоки:

- направлены от серверных контуров к браузерному контексту;
- не изменяют каноническое состояние корпуса данных;
- не инициируют серверные вычисления;
- не являются реактивными.

Потоки передачи не формируют новых архитектурных артефактов и не участвуют в формировании корпуса данных.

---

## Общая модель передачи данных

Передача корпусных данных осуществляется как предоставление браузерному контуру доступа к уже сформированным и сохранённым данным корпуса.

Данные передаются или становятся доступными для чтения в браузерном контексте, но их получение не рассматривается как продолжение серверных потоков формирования корпуса.

Потоки передачи корпусных данных не образуют циклов и не имеют обратных связей к серверным контурам.

![Corpus Delivery Data Flows](../../_img/mindstream_arch_data_flow_transfer.svg)

Схема: **Corpus Delivery Data Flows**.

---

## Поток передачи корпусных данных в контур потребления

(`Storage → Consumption`)

**Назначение**  
Обеспечение браузерного контура данными корпуса, необходимыми для формирования персональной ленты и пользовательского чтения.

**Передаваемые данные**

- смысловые представления публикаций (Annotation, Overview);
- эмбеддинги, ассоциированные со смысловыми представлениями;
- агрегированная статистика внимания, относящаяся к корпусу данных.

**Свойства потока**

- поток является однонаправленным;
- передача данных не изменяет состояние корпуса;
- получение данных не инициирует серверные вычисления;
- объём и состав передаваемых данных могут зависеть от режима доступа.

---

## Условный поток доступа к профилю интересов

(`Storage → Interest Profile`)

**Назначение**  
Предоставление браузерному контуру доступа к каноническому профилю интересов пользователя при соответствующем режиме доступа.

**Условие допуска**

- поток допускается только в режиме полного доступа;
- в демо-режиме данный поток отсутствует.

**Свойства потока**

- поток не является обязательным для функционирования системы;
- передаваемый interest vector используется в браузерном контуре как входное состояние;
- получение interest vector не инициирует пересчёт корпуса данных и не создаёт обратных связей.

---

## Режимы доступа и вариативность потоков

Потоки передачи корпусных данных допускают вариативность в зависимости от режима доступа пользователя.

**Демо-режим**

- браузерный контур получает доступ только к демонстрационному корпусу данных;
- поток доступа к профилю интересов отсутствует;
- interest vector формируется и используется локально в браузерном контексте.

**Режим полного доступа**

- браузерный контур получает доступ к полному корпусу данных;
- допускается поток доступа к каноническому профилю интересов;
- interest vector может быть получен из серверного хранилища и использован как входное состояние.

В обоих режимах направленность потоков и их архитектурная роль остаются неизменными.

---

## Архитектурные ограничения потоков передачи

В рамках MVP для Corpus Delivery Flows считается истинным, что:

- потоки передачи не инициируются браузерным контуром как управляющие;
- передача данных не изменяет серверное состояние;
- потоки не имеют обратных связей к контурам формирования корпуса;
- локальные вычисления браузера не считаются частью данных потоков передачи.

Нарушение любого из этих свойств считается выходом за рамки MVP.

---

## Границы документа

Данный документ не описывает:

- API доступа к данным корпуса;
- форматы сериализации и передачи данных;
- стратегию кеширования и обновления данных;
- пользовательский интерфейс и визуализацию ленты;
- алгоритмы формирования interest vector.

Эти вопросы относятся к другим слоям документации.

---

## Итог

Документ фиксирует Corpus Delivery Flows Mindstream как однонаправленные архитектурные потоки доступа к каноническому корпусу данных и условному профилю интересов, обеспечивающие локальное формирование персональной ленты без изменения серверного состояния и без глобальной реактивности в рамках MVP.
