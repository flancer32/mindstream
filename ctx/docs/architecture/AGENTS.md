# Architecture Layer — AGENTS

Path: `./ctx/docs/architecture/AGENTS.md`

## Назначение

Документ определяет границы архитектурного слоя документации Mindstream и фиксирует форму системы, её контуры, допустимые потоки данных и архитектурные инварианты MVP без перехода к реализации или пользовательскому интерфейсу.

## Карта уровня

- `attention/` — архитектурные документы оси Attention и её инвариантов.
- `anonymous-identity/` — архитектурные инварианты anonymous identity как технической сущности.
- `content-collection/` — архитектурные инварианты Content Collection.
- `data-flow/` — детализация архитектурных потоков данных по типам.
- `ingress/` — архитектурные документы ingress-границ и их инвариантов.
- `storage/` — архитектурные документы storage-контура и его инвариантов.
- `AGENTS.md` — текущий документ, определяющий границы слоя.
- `output.md` — игнорируемый вывод, не входящий в контекст.
- `overview.md` — архитектурная форма системы, контуры и границы.

## Границы слоя

Архитектурный слой описывает форму развёртывания системы, роли контуров, границу системы и внешней среды и допустимые потоки данных, не переходя к продуктовым смыслам, ограничениям, пользовательскому интерфейсу, алгоритмам, формулам и технологическим решениям.

## Инварианты слоя

В рамках архитектурной документации утверждается, что в серверных контурах Mindstream применяется однонаправленный pipeline с монотонным накоплением состояния и без обратных связей, циклов и реактивного поведения.

В связке серверных и браузерных контуров допускаются обратные потоки статистики внимания, не влияющие на формирование Content Collection и не нарушающие однонаправленность серверного pipeline.

Внешние источники и LLM являются частью внешней среды, embeddings являются архитектурной подсистемой, а consume-контур не изменяет архитектурное состояние.

## Связи с другими слоями

`product/` задаёт смысл и язык архитектурного описания, а `constraints/` имеют приоритет и ограничивают допустимую форму архитектуры.

`composition/` использует результаты архитектуры как прикладную основу, а `code/` и `environment/` реализуют архитектурную форму без её расширения.

## Итог

`ctx/docs/architecture/AGENTS.md` фиксирует архитектурный слой как уровень формы и связей, отделяющий продуктовый смысл от реализации и сохраняющий архитектурные инварианты MVP Mindstream.
