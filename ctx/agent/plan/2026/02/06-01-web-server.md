# Plan: HTTP Ingress and Web Server Setup (MVP)

## Goal

Зафиксировать архитектурное решение по HTTP-входу Mindstream и подготовить корпус документации,
достаточный для реализации MVP без расползания уровней и смыслов.

---

## Step 1. Зафиксировать архитектурное понятие HTTP Ingress

- Ввести термин **HTTP Ingress** как основной внешний HTTP-интерфейс системы.
- Определить его назначение, границы ответственности и инварианты.
- Явно зафиксировать:
  - обязательность Apache в runtime-контуре MVP;
  - отсутствие прямого внешнего доступа к Node-приложению;
  - каноническую реализацию HTTP Ingress через `@flancer32/teq-web`.

**Результат:** документ `ctx/docs/architecture/http-ingress.md`.

---

## Step 2. Уточнить роль Apache в runtime-архитектуре

- Зафиксировать Apache как обязательный компонент исполнения MVP.
- Описать его функции:
  - TLS termination;
  - routing (`/api/**` → Node);
  - раздача статики / SPA.
- Показать связку: Client → Apache → Node (HTTP Ingress).

**Результат:** обновлённый раздел в `ctx/docs/architecture/runtime.md` или `deployment.md`
(без конфигов и технических деталей).

---

## Step 3. Зафиксировать границы HTTP API

- Указать, что `/api/**` предназначен для сервисов, доступных с веба.
- Зафиксировать, что CLI-команды не являются частью HTTP API.
- Явно не запрещать другие HTTP-обработчики вне `/api/**` (SSR и т.п.).

**Результат:** краткий подраздел в документе про HTTP Ingress или API-архитектуру.

---

## Step 4. Проверить согласованность корпуса документов

- Убедиться, что:
  - термин **HTTP Ingress** используется консистентно;
  - Apache нигде не фигурирует как опциональный компонент;
  - `@flancer32/teq-web` не описывается как сменяемая реализация.
- Убрать или уточнить места, где уровни (архитектура / реализация) могли смешаться.

**Результат:** согласованный архитектурный контур HTTP-входа MVP.

---

## Step 5. Зафиксировать точку перехода к реализации

- Определить, что после этого плана:
  - допускается описание dispatcher-модели;
  - допускается постановка задач на реализацию HTTP-слоя.
- До этого шага код и агенты не трогаются.

**Результат:** чёткая граница между архитектурой и реализацией HTTP-входа.
