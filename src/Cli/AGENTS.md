# CLI Source — AGENTS

Path: `./src/Cli/AGENTS.md`

## Назначение

Документ фиксирует **инварианты формы CLI-кода** в каталоге `src/Cli/` и указывает нормативные источники, которым реализация обязана соответствовать.

Документ не описывает модель CLI, дерево команд или семантику выполнения. Эти аспекты зафиксированы в документации более высокого уровня.

---

## Нормативные источники

Любые изменения CLI-кода **обязаны соответствовать** следующим документам:

- `ctx/docs/code/cli/overview.md` — рамочная модель CLI в MVP.
- `ctx/docs/code/cli/dispatcher.md` — нормативная модель диспетчеризации и ролей CLI-модулей.
- `ctx/docs/code/cli/command-tree.md` — зафиксированное пространство допустимых CLI-команд.

Данные документы являются источником истины. `src/Cli/AGENTS.md` их не расширяет и не уточняет.

---

## Инварианты формы CLI-кода

При работе с кодом в `src/Cli/` считается обязательным, что:

- структура каталогов **изоморфна дереву CLI-команд**;
- роль модуля (диспетчер или команда) определяется **только** его положением в дереве каталогов;
- все CLI-модули предоставляются через DI-контейнер;
- CLI-код не управляет жизненным циклом приложения и не завершает процесс напрямую;
- leaf-модули реализуют исполняемые команды и не содержат диспетчерской логики.

---

## Явные запреты

В рамках `src/Cli/` запрещено:

- вводить команды, отсутствующие в `command-tree.md`;
- изменять иерархию команд без синхронного изменения `command-tree.md`;
- реализовывать бизнес-логику, не относящуюся к выполнению конкретной команды;
- добавлять интерактивность, диалоги или подтверждения;
- управлять освобождением ресурсов или завершением процесса.

---

## Граница ответственности

`src/Cli/` реализует **выбор и запуск режима выполнения backend-приложения**.

CLI-код не:

- описывает архитектуру;
- не определяет продуктовые смыслы;
- не формирует корпус данных;
- не интерпретирует пользовательское поведение.

---

## Итог

`src/Cli/AGENTS.md` служит **якорем формы**, а не описанием поведения.

Любые изменения CLI-кода должны быть механическим следствием нормативных документов уровня `ctx/docs/code/cli`.
