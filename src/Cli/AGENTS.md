# CLI Source — AGENTS

Path: `./src/Cli/AGENTS.md`

## Назначение

Документ задаёт процедурные требования к изменениям CLI-кода в каталоге `src/Cli/` и фиксирует нормативные источники, которым обязана соответствовать реализация.

## Нормативные источники

CLI-код в `src/Cli/` обязан соответствовать следующим документам когнитивного контекста:

- `ctx/docs/code/cli/overview.md` — рамочная модель CLI.
- `ctx/docs/code/cli/dispatcher.md` — нормативная модель диспетчеризации и роль CLI-модулей.
- `ctx/docs/code/cli/command-tree.md` — зафиксированное пространство допустимых CLI-команд и веток.

## Состав CLI-модулей `src/Cli/`

- `Db/` — поддерево команд `db:*`, реализуемое листовыми командами и локальными диспетчерами.
- `AGENTS.md` — текущий документ, описывающий нормативные источники и правила изменения CLI-кода уровня.
- `Db.mjs` — диспетчер поддерева `db:*` в соответствии с моделью CLI.
- `Db/Schema/` — пространство команд `db:schema:*` (листья дерева).
- `Db/Schema/Create.mjs` — leaf-команда `db:schema:create` для создания схемы данных в пустой базе.
- `Ingest/` — поддерево команд `ingest:*`, реализуемое листовыми командами и локальными диспетчерами.
- `Ingest.mjs` — диспетчер поддерева `ingest:*` в соответствии с моделью CLI.
- `Ingest/Discover/` — пространство команд `ingest:discover:*` (листья дерева).
- `Ingest/Discover/Habr.mjs` — leaf-команда `ingest:discover:habr` для discovery публикаций из RSS Хабра.
- `Ingest/Extract/` — пространство команд `ingest:extract:*` (листья дерева).
- `Ingest/Extract/Habr.mjs` — leaf-команда `ingest:extract:habr` для извлечения md-текста публикаций Хабра.
- `Runtime/` — пространство runtime-команд (`runtime:*`) и связанные leaf-модули.
- `Runtime.mjs` — диспетчер поддерева `runtime:*` в соответствии с моделью CLI.
- `Runtime/Serve.mjs` — leaf-команда `runtime:serve` для запуска runtime-режима.

## Правила изменения CLI-кода

- Любые изменения CLI-команд или структуры CLI-модулей допускаются только как реализация утверждённого дерева CLI из `ctx/docs/code/cli/command-tree.md`.
- Изменение пространства допустимых CLI-команд без синхронного обновления `ctx/docs/code/cli/command-tree.md` считается дефектом.
- Реализация CLI не может расширять или сужать дерево команд по сравнению с документированным скелетом.

## Итог

`src/Cli/AGENTS.md` фиксирует обязательную связку между реализацией CLI и документированным деревом команд, обеспечивая корректность изменений в пределах нормативной модели.
